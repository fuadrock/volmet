<div *ngIf="isLoading" class="loading-shade">
  <mat-spinner *ngIf="isLoading"></mat-spinner>
</div>
<nb-layout>


  <nb-layout-column class="background-color-white">
    <nb-alert status="success" *ngIf="success">
      You have been successfully authenticated!
    </nb-alert>
    <nb-alert status="danger" *ngIf="danger">
      {{message}}
    </nb-alert>
    <div class="sign-in-background" style="padding: 4em;">
      <div style="text-align: center;">
        <span class="title">Voice VOLMET Broadcast System</span>
      </div>

      <div class="margin-top-small position-center">
        <nb-flip-card [showToggleButton]="false" [flipped]="flipped" style="
            max-width: 340px;
            max-height: 447px;
            min-width: 340px;
            min-height: 395px;
            margin: 0 auto;
          ">
          <nb-card-front>
            <nb-card class="box-shadow" style="
                width: 100%;
                height: 100%;
                padding: 2.5em;
                margin-bottom: 0 !important;
              ">
              <nb-card-body>

                <span>Sign in to your account</span>
                <form class="margin-top-small" autocomplete="off" [formGroup]="loginForm" (ngSubmit)="onSubmit()" #form="ngForm"
                  aria-labelledby="title">
                  <div class="form-control-group row">
                    <label class="label col-sm-12" for="input-username" style="color: #3c4256 !important;">Username</label>
                    <div class="col-sm-12 input-group">
                    <input nbInput formControlName="Username" name="Username" id="input-Username"
                    fieldSize="large" class="form-control size-large " autofocus [status]="Username.invalid && submitted ? 'danger' : 'basic'" />
                   </div>
                    <ng-container *ngIf="
                        Username.invalid && (Username.dirty || Username.touched)
                      ">
                      <p class="caption col-sm-12 status-danger" *ngIf="Username.errors?.required">
                        *Required!
                      </p>
                      <p class="caption col-sm-12 status-danger" *ngIf="Username.errors?.minlength">
                        Username should be at least 8 characters!
                      </p>
                    </ng-container>
                  </div>

                  <div class="form-control-group  row">
                    <label class="label margin-top-small col-sm-12" for="input-password"
                      style="color: #3c4256 !important;">Password</label>
                    <div class="col-sm-12 input-group">
                      <input nbInput formControlName="password" name="password" [type]="fieldTextType ? 'text' : 'password'" id="input-password"
                        fieldSize="large" class="form-control size-large"
                        [status]="password.invalid && submitted ? 'danger' : 'basic'" />
                      <div class="input-group-append">
                        <span class="input-group-text">
                          <i class="fa" [ngClass]="{
                              'fa-eye-slash': !fieldTextType,
                              'fa-eye': fieldTextType
                            }" (click)="toggleFieldTextType()"></i>
                        </span>
                      </div>
                    </div>

                    <ng-container *ngIf="password.invalid && (password.dirty || password.touched)">

                      <p class="caption status-danger col-sm-12" *ngIf="password.errors?.required">
                        *Required!
                      </p>
                      <p class="caption status-danger col-sm-12" *ngIf="password.errors?.minlength">
                        Password should be at least 8 characters!
                      </p>
                    </ng-container>

                  </div>
                  <button nbButton fullWidth status="primary" class="margin-top-small" size="large"
                    style="text-transform: none;">
                    Sign in
                  </button>
                </form>
              </nb-card-body>
            </nb-card>
          </nb-card-front>
          <nb-card-back>
            <nb-alert status="success" *ngIf="success">
              You have been successfully authenticated!
            </nb-alert>
            <nb-alert status="danger" *ngIf="danger">
              {{message}}
            </nb-alert>
            <nb-card class="box-shadow" style="
                width: 100%;
                height: 100%;
                padding: 3em;
                margin-bottom: 0 !important;
              ">
              <nb-card-body style="padding: 0;">

                <div>
                  <div>
                    <nb-icon (click)="back()" icon="arrow-back-outline" style="color: black; cursor: pointer;">
                    </nb-icon>
                    <span style="margin-left: 0.5em;">Select your group</span>
                  </div>
                  <form class="margin-top-small" [formGroup]="groupForm" (ngSubmit)="groupSubmit()" #form="ngForm"
                    aria-labelledby="title">
                    <div class="form-control-group">
                      <label class="label" for="input-email" style="color: #3c4256 !important;">Groups</label>
                      <nb-select formControlName="GroupId" style="width: 100%;">
                        <nb-option *ngFor="let e of groups" [value]="e.Id">
                          {{ e.Name }}
                        </nb-option>
                      </nb-select>
                    </div>

                    <button nbButton fullWidth status="primary" class="margin-top-small" size="large"
                      style="text-transform: none; width: 100%;">
                      Continue
                    </button>
                  </form>
                </div>
              </nb-card-body>
            </nb-card>
          </nb-card-back>
        </nb-flip-card>
      </div>
      <div class="position-center" style="
          max-width: 340px;
          margin-top: 1em !important;
          text-align: center;
        ">
        <span style="font-size: 12px; font-weight: 500; color: #1a1f37 !important;">Don't have an account or forgot
          password?<br />Contact with the
          administration</span>
      </div>
    </div>
  </nb-layout-column>

</nb-layout>
